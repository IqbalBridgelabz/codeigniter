<div *ngIf="!isOpen" class="addNote" (click)="isOpen=true">

  <div class="addNoteInputDiv">Take a note...</div>

</div>

<div *ngIf="isOpen" class="addNote" [ngStyle]="{'backgroundColor': color}">

  <div class="addNoteInputDiv">

    <textarea [ngStyle]="{'backgroundColor': color}" class="addNoteTitleInput" placeholder="Title" [(ngModel)]="note.title"></textarea>

    <button class="pinIcon" mat-icon-button matTooltip="Pin/Unpin Note" (click)="pin(item)">
      <ng-container *ngIf="pinValue; else elsePinTemplate">
        <svg-icon [src]="pinnedIconSrc"> </svg-icon>
      </ng-container>
      <ng-template #elsePinTemplate>
        <svg-icon [src]="unpinnedIconSrc"> </svg-icon>
      </ng-template>
    </button>

    <textarea [ngStyle]="{'backgroundColor': color}" class="addNoteInput" placeholder="Take a note..." [(ngModel)]="note.body"></textarea>

  </div>

  <div *ngIf="reminder">
    {{reminder}}
 <button mat-button class="deleteReminderIcon" (click)="deleteReminder()">
    <mat-icon class="deleteReminderIcon">cancel</mat-icon>
 </button>
</div>



  <div class="addNoteControlIcon">

    <button mat-icon-button matTooltip="Remind me" (click)="toggleReminderMenu()">
      <mat-icon class="mat-18">notifications
      </mat-icon>
    </button>

    <div class="reminderMenu" *ngIf="reminderMenuBool">

      <span>Reminder:</span> 

      <div>
          <input [(ngModel)]="inputDate" class="setReminderInput" matInput [matDatepicker]="picker" placeholder="Choose a date" 
          autocomplete="off" value="{{inputDate}}">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
      </div>
     
    
      <div>
    
          <input matInput [(ngModel)]="inputTime" value="{{inputTime}}" class="setReminderInput" 
          atp-time-picker autocomplete="off" placeholder="Set time">
          <mat-icon class="mat-18">access_time</mat-icon>
      
      </div>
    
      <button mat-button (click)="setReminder()">Set Reminder</button>
    
    </div>

    <button mat-icon-button matTooltip="Collaborator">
      <mat-icon class="mat-18">person_add_outline
      </mat-icon>
    </button>

    <button mat-icon-button matTooltip="Change color" [matMenuTriggerFor]="colorMenu">
      <mat-icon class="mat-18">color_lens</mat-icon>
    </button>

    <button mat-icon-button matTooltip="Add image">
      <mat-icon class="mat-18">photo</mat-icon>
    </button>

    <button mat-icon-button matTooltip="Archive" (click)="archive()">
      <mat-icon class="mat-18">archive</mat-icon>
    </button>

    <button mat-icon-button matTooltip="More" [matMenuTriggerFor]="moreMenu" [matMenuTriggerData]="{item:note}">
      <mat-icon class="mat-18">more_vert</mat-icon>
    </button>

    <button mat-button type="submit" class="closeNoteButton" (click)="addNoteClose()" (click)="isOpen=false">Close</button>

  </div>

</div>

<mat-menu #colorMenu="matMenu" class="colorMenu">

  <ng-template matMenuContent let-note="note">

    <div *ngFor="let color of colorCode">

      <button mat-icon-button [ngStyle]="{'color': color.colorCode}" (click)="changeColor(color.colorCode)">

        <mat-icon class="colorIcons">fiber_manual_record</mat-icon>

      </button>

    </div>

  </ng-template>

</mat-menu>

<mat-menu #moreMenu="matMenu">

    <ng-template matMenuContent let-item="item">
  
      <button mat-menu-item (click)="addTrash()"> Delete Note </button>
  
      <button mat-menu-item> Add Label </button>
  
    </ng-template>
  
  </mat-menu>

  <div>

<div class="notes">

    <app-notes #child></app-notes>
  
  </div>